# HyperEngine
HyperEngine is an early-stage interactive application and rendering engine for Windows and Linux.

* [Vulkan Code Generator](
https://gen.glad.sh/#generator=c&api=vulkan%3D1.1&profile=gl%3Dcore%2Cgles1%3Dcommon&extensions=VK_AMD_anti_lag%2CVK_AMD_buffer_marker%2CVK_AMD_device_coherent_memory%2CVK_AMD_display_native_hdr%2CVK_AMD_draw_indirect_count%2CVK_AMD_gcn_shader%2CVK_AMD_gpu_shader_half_float%2CVK_AMD_gpu_shader_int16%2CVK_AMD_memory_overallocation_behavior%2CVK_AMD_mixed_attachment_samples%2CVK_AMD_negative_viewport_height%2CVK_AMD_pipeline_compiler_control%2CVK_AMD_rasterization_order%2CVK_AMD_shader_ballot%2CVK_AMD_shader_core_properties%2CVK_AMD_shader_core_properties2%2CVK_AMD_shader_early_and_late_fragment_tests%2CVK_AMD_shader_explicit_vertex_parameter%2CVK_AMD_shader_fragment_mask%2CVK_AMD_shader_image_load_store_lod%2CVK_AMD_shader_info%2CVK_AMD_shader_trinary_minmax%2CVK_AMD_texture_gather_bias_lod%2CVK_AMDX_shader_enqueue%2CVK_ANDROID_external_format_resolve%2CVK_ANDROID_external_memory_android_hardware_buffer%2CVK_ARM_rasterization_order_attachment_access%2CVK_ARM_render_pass_striped%2CVK_ARM_scheduling_controls%2CVK_ARM_shader_core_builtins%2CVK_ARM_shader_core_properties%2CVK_EXT_4444_formats%2CVK_EXT_acquire_drm_display%2CVK_EXT_acquire_xlib_display%2CVK_EXT_astc_decode_mode%2CVK_EXT_attachment_feedback_loop_dynamic_state%2CVK_EXT_attachment_feedback_loop_layout%2CVK_EXT_blend_operation_advanced%2CVK_EXT_border_color_swizzle%2CVK_EXT_buffer_device_address%2CVK_EXT_calibrated_timestamps%2CVK_EXT_color_write_enable%2CVK_EXT_conditional_rendering%2CVK_EXT_conservative_rasterization%2CVK_EXT_custom_border_color%2CVK_EXT_debug_marker%2CVK_EXT_debug_report%2CVK_EXT_debug_utils%2CVK_EXT_depth_bias_control%2CVK_EXT_depth_clamp_zero_one%2CVK_EXT_depth_clip_control%2CVK_EXT_depth_clip_enable%2CVK_EXT_depth_range_unrestricted%2CVK_EXT_descriptor_buffer%2CVK_EXT_descriptor_indexing%2CVK_EXT_device_address_binding_report%2CVK_EXT_device_fault%2CVK_EXT_device_memory_report%2CVK_EXT_direct_mode_display%2CVK_EXT_directfb_surface%2CVK_EXT_discard_rectangles%2CVK_EXT_display_control%2CVK_EXT_display_surface_counter%2CVK_EXT_dynamic_rendering_unused_attachments%2CVK_EXT_extended_dynamic_state%2CVK_EXT_extended_dynamic_state2%2CVK_EXT_extended_dynamic_state3%2CVK_EXT_external_memory_acquire_unmodified%2CVK_EXT_external_memory_dma_buf%2CVK_EXT_external_memory_host%2CVK_EXT_filter_cubic%2CVK_EXT_fragment_density_map%2CVK_EXT_fragment_density_map2%2CVK_EXT_fragment_shader_interlock%2CVK_EXT_frame_boundary%2CVK_EXT_full_screen_exclusive%2CVK_EXT_global_priority%2CVK_EXT_global_priority_query%2CVK_EXT_graphics_pipeline_library%2CVK_EXT_hdr_metadata%2CVK_EXT_headless_surface%2CVK_EXT_host_image_copy%2CVK_EXT_host_query_reset%2CVK_EXT_image_2d_view_of_3d%2CVK_EXT_image_compression_control%2CVK_EXT_image_compression_control_swapchain%2CVK_EXT_image_drm_format_modifier%2CVK_EXT_image_robustness%2CVK_EXT_image_sliced_view_of_3d%2CVK_EXT_image_view_min_lod%2CVK_EXT_index_type_uint8%2CVK_EXT_inline_uniform_block%2CVK_EXT_layer_settings%2CVK_EXT_legacy_dithering%2CVK_EXT_legacy_vertex_attributes%2CVK_EXT_line_rasterization%2CVK_EXT_map_memory_placed%2CVK_EXT_memory_budget%2CVK_EXT_memory_priority%2CVK_EXT_mesh_shader%2CVK_EXT_metal_objects%2CVK_EXT_metal_surface%2CVK_EXT_multi_draw%2CVK_EXT_multisampled_render_to_single_sampled%2CVK_EXT_mutable_descriptor_type%2CVK_EXT_nested_command_buffer%2CVK_EXT_non_seamless_cube_map%2CVK_EXT_opacity_micromap%2CVK_EXT_pageable_device_local_memory%2CVK_EXT_pci_bus_info%2CVK_EXT_physical_device_drm%2CVK_EXT_pipeline_creation_cache_control%2CVK_EXT_pipeline_creation_feedback%2CVK_EXT_pipeline_library_group_handles%2CVK_EXT_pipeline_properties%2CVK_EXT_pipeline_protected_access%2CVK_EXT_pipeline_robustness%2CVK_EXT_post_depth_coverage%2CVK_EXT_primitive_topology_list_restart%2CVK_EXT_primitives_generated_query%2CVK_EXT_private_data%2CVK_EXT_provoking_vertex%2CVK_EXT_queue_family_foreign%2CVK_EXT_rasterization_order_attachment_access%2CVK_EXT_rgba10x6_formats%2CVK_EXT_robustness2%2CVK_EXT_sample_locations%2CVK_EXT_sampler_filter_minmax%2CVK_EXT_scalar_block_layout%2CVK_EXT_separate_stencil_usage%2CVK_EXT_shader_atomic_float%2CVK_EXT_shader_atomic_float2%2CVK_EXT_shader_demote_to_helper_invocation%2CVK_EXT_shader_image_atomic_int64%2CVK_EXT_shader_module_identifier%2CVK_EXT_shader_object%2CVK_EXT_shader_replicated_composites%2CVK_EXT_shader_stencil_export%2CVK_EXT_shader_subgroup_ballot%2CVK_EXT_shader_subgroup_vote%2CVK_EXT_shader_tile_image%2CVK_EXT_shader_viewport_index_layer%2CVK_EXT_subgroup_size_control%2CVK_EXT_subpass_merge_feedback%2CVK_EXT_surface_maintenance1%2CVK_EXT_swapchain_colorspace%2CVK_EXT_swapchain_maintenance1%2CVK_EXT_texel_buffer_alignment%2CVK_EXT_texture_compression_astc_hdr%2CVK_EXT_tooling_info%2CVK_EXT_transform_feedback%2CVK_EXT_validation_cache%2CVK_EXT_validation_features%2CVK_EXT_validation_flags%2CVK_EXT_vertex_attribute_divisor%2CVK_EXT_vertex_input_dynamic_state%2CVK_EXT_ycbcr_2plane_444_formats%2CVK_EXT_ycbcr_image_arrays%2CVK_FUCHSIA_buffer_collection%2CVK_FUCHSIA_external_memory%2CVK_FUCHSIA_external_semaphore%2CVK_FUCHSIA_imagepipe_surface%2CVK_GGP_frame_token%2CVK_GGP_stream_descriptor_surface%2CVK_GOOGLE_decorate_string%2CVK_GOOGLE_display_timing%2CVK_GOOGLE_hlsl_functionality1%2CVK_GOOGLE_surfaceless_query%2CVK_GOOGLE_user_type%2CVK_HUAWEI_cluster_culling_shader%2CVK_HUAWEI_invocation_mask%2CVK_HUAWEI_subpass_shading%2CVK_IMG_filter_cubic%2CVK_IMG_format_pvrtc%2CVK_IMG_relaxed_line_rasterization%2CVK_INTEL_performance_query%2CVK_INTEL_shader_integer_functions2%2CVK_KHR_16bit_storage%2CVK_KHR_8bit_storage%2CVK_KHR_acceleration_structure%2CVK_KHR_android_surface%2CVK_KHR_bind_memory2%2CVK_KHR_buffer_device_address%2CVK_KHR_calibrated_timestamps%2CVK_KHR_cooperative_matrix%2CVK_KHR_copy_commands2%2CVK_KHR_create_renderpass2%2CVK_KHR_dedicated_allocation%2CVK_KHR_deferred_host_operations%2CVK_KHR_depth_stencil_resolve%2CVK_KHR_descriptor_update_template%2CVK_KHR_device_group%2CVK_KHR_device_group_creation%2CVK_KHR_display%2CVK_KHR_display_swapchain%2CVK_KHR_draw_indirect_count%2CVK_KHR_driver_properties%2CVK_KHR_dynamic_rendering%2CVK_KHR_dynamic_rendering_local_read%2CVK_KHR_external_fence%2CVK_KHR_external_fence_capabilities%2CVK_KHR_external_fence_fd%2CVK_KHR_external_fence_win32%2CVK_KHR_external_memory%2CVK_KHR_external_memory_capabilities%2CVK_KHR_external_memory_fd%2CVK_KHR_external_memory_win32%2CVK_KHR_external_semaphore%2CVK_KHR_external_semaphore_capabilities%2CVK_KHR_external_semaphore_fd%2CVK_KHR_external_semaphore_win32%2CVK_KHR_format_feature_flags2%2CVK_KHR_fragment_shader_barycentric%2CVK_KHR_fragment_shading_rate%2CVK_KHR_get_display_properties2%2CVK_KHR_get_memory_requirements2%2CVK_KHR_get_physical_device_properties2%2CVK_KHR_get_surface_capabilities2%2CVK_KHR_global_priority%2CVK_KHR_image_format_list%2CVK_KHR_imageless_framebuffer%2CVK_KHR_incremental_present%2CVK_KHR_index_type_uint8%2CVK_KHR_line_rasterization%2CVK_KHR_maintenance1%2CVK_KHR_maintenance2%2CVK_KHR_maintenance3%2CVK_KHR_maintenance4%2CVK_KHR_maintenance5%2CVK_KHR_maintenance6%2CVK_KHR_maintenance7%2CVK_KHR_map_memory2%2CVK_KHR_multiview%2CVK_KHR_performance_query%2CVK_KHR_pipeline_executable_properties%2CVK_KHR_pipeline_library%2CVK_KHR_portability_enumeration%2CVK_KHR_portability_subset%2CVK_KHR_present_id%2CVK_KHR_present_wait%2CVK_KHR_push_descriptor%2CVK_KHR_ray_query%2CVK_KHR_ray_tracing_maintenance1%2CVK_KHR_ray_tracing_pipeline%2CVK_KHR_ray_tracing_position_fetch%2CVK_KHR_relaxed_block_layout%2CVK_KHR_sampler_mirror_clamp_to_edge%2CVK_KHR_sampler_ycbcr_conversion%2CVK_KHR_separate_depth_stencil_layouts%2CVK_KHR_shader_atomic_int64%2CVK_KHR_shader_clock%2CVK_KHR_shader_draw_parameters%2CVK_KHR_shader_expect_assume%2CVK_KHR_shader_float16_int8%2CVK_KHR_shader_float_controls%2CVK_KHR_shader_float_controls2%2CVK_KHR_shader_integer_dot_product%2CVK_KHR_shader_maximal_reconvergence%2CVK_KHR_shader_non_semantic_info%2CVK_KHR_shader_quad_control%2CVK_KHR_shader_relaxed_extended_instruction%2CVK_KHR_shader_subgroup_extended_types%2CVK_KHR_shader_subgroup_rotate%2CVK_KHR_shader_subgroup_uniform_control_flow%2CVK_KHR_shader_terminate_invocation%2CVK_KHR_shared_presentable_image%2CVK_KHR_spirv_1_4%2CVK_KHR_storage_buffer_storage_class%2CVK_KHR_surface%2CVK_KHR_surface_protected_capabilities%2CVK_KHR_swapchain%2CVK_KHR_swapchain_mutable_format%2CVK_KHR_synchronization2%2CVK_KHR_timeline_semaphore%2CVK_KHR_uniform_buffer_standard_layout%2CVK_KHR_variable_pointers%2CVK_KHR_vertex_attribute_divisor%2CVK_KHR_video_decode_av1%2CVK_KHR_video_decode_h264%2CVK_KHR_video_decode_h265%2CVK_KHR_video_decode_queue%2CVK_KHR_video_encode_h264%2CVK_KHR_video_encode_h265%2CVK_KHR_video_encode_queue%2CVK_KHR_video_maintenance1%2CVK_KHR_video_queue%2CVK_KHR_vulkan_memory_model%2CVK_KHR_wayland_surface%2CVK_KHR_win32_keyed_mutex%2CVK_KHR_win32_surface%2CVK_KHR_workgroup_memory_explicit_layout%2CVK_KHR_xcb_surface%2CVK_KHR_xlib_surface%2CVK_KHR_zero_initialize_workgroup_memory%2CVK_LUNARG_direct_driver_loading%2CVK_MESA_image_alignment_control%2CVK_MSFT_layered_driver%2CVK_MVK_ios_surface%2CVK_MVK_macos_surface%2CVK_NN_vi_surface%2CVK_NV_acquire_winrt_display%2CVK_NV_clip_space_w_scaling%2CVK_NV_command_buffer_inheritance%2CVK_NV_compute_shader_derivatives%2CVK_NV_cooperative_matrix%2CVK_NV_copy_memory_indirect%2CVK_NV_corner_sampled_image%2CVK_NV_coverage_reduction_mode%2CVK_NV_cuda_kernel_launch%2CVK_NV_dedicated_allocation%2CVK_NV_dedicated_allocation_image_aliasing%2CVK_NV_descriptor_pool_overallocation%2CVK_NV_device_diagnostic_checkpoints%2CVK_NV_device_diagnostics_config%2CVK_NV_device_generated_commands%2CVK_NV_device_generated_commands_compute%2CVK_NV_displacement_micromap%2CVK_NV_extended_sparse_address_space%2CVK_NV_external_memory%2CVK_NV_external_memory_capabilities%2CVK_NV_external_memory_rdma%2CVK_NV_external_memory_win32%2CVK_NV_fill_rectangle%2CVK_NV_fragment_coverage_to_color%2CVK_NV_fragment_shader_barycentric%2CVK_NV_fragment_shading_rate_enums%2CVK_NV_framebuffer_mixed_samples%2CVK_NV_geometry_shader_passthrough%2CVK_NV_glsl_shader%2CVK_NV_inherited_viewport_scissor%2CVK_NV_linear_color_attachment%2CVK_NV_low_latency%2CVK_NV_low_latency2%2CVK_NV_memory_decompression%2CVK_NV_mesh_shader%2CVK_NV_optical_flow%2CVK_NV_per_stage_descriptor_set%2CVK_NV_present_barrier%2CVK_NV_raw_access_chains%2CVK_NV_ray_tracing%2CVK_NV_ray_tracing_invocation_reorder%2CVK_NV_ray_tracing_motion_blur%2CVK_NV_ray_tracing_validation%2CVK_NV_representative_fragment_test%2CVK_NV_sample_mask_override_coverage%2CVK_NV_scissor_exclusive%2CVK_NV_shader_atomic_float16_vector%2CVK_NV_shader_image_footprint%2CVK_NV_shader_sm_builtins%2CVK_NV_shader_subgroup_partitioned%2CVK_NV_shading_rate_image%2CVK_NV_viewport_array2%2CVK_NV_viewport_swizzle%2CVK_NV_win32_keyed_mutex%2CVK_NVX_binary_import%2CVK_NVX_image_view_handle%2CVK_NVX_multiview_per_view_attributes%2CVK_QCOM_filter_cubic_clamp%2CVK_QCOM_filter_cubic_weights%2CVK_QCOM_fragment_density_map_offset%2CVK_QCOM_image_processing%2CVK_QCOM_image_processing2%2CVK_QCOM_multiview_per_view_render_areas%2CVK_QCOM_multiview_per_view_viewports%2CVK_QCOM_render_pass_shader_resolve%2CVK_QCOM_render_pass_store_ops%2CVK_QCOM_render_pass_transform%2CVK_QCOM_rotated_copy_commands%2CVK_QCOM_tile_properties%2CVK_QCOM_ycbcr_degamma%2CVK_QNX_external_memory_screen_buffer%2CVK_QNX_screen_surface%2CVK_SEC_amigo_profiling%2CVK_VALVE_descriptor_set_host_mapping%2CVK_VALVE_mutable_descriptor_type&options=LOADER)

## Getting Started
Visual Studio 2019 or 2022 is recommended.

<ins>**1. Downloading the repo:**</ins>

Start by cloning the repo. `git clone --recurse-submodules https://github.com/anthofoxo/hyperengine`.

If the repository was cloned non-recursively previously, use `git submodule update --init` to clone the necessary submodules.

<ins>**2. Configuring wayland dependencies: (Linux only)**</ins>

HyperEngine supports wayland via GLFW which requires generating headers. Run `./scripts/xdg.sh` to generate the `xdg` headers.

<ins>**3. Building:**</ins>

We use [Premake5](https://premake.github.io/) as a build system. Have this installed. Once installed use `premake5 vs2019` or `premake5 vs2022` to generate Visual Studio project files or `premake5 gmake2` to generate makefiles. When using make use the `config` option to select the build configuration. Eg: `make config=debug`.

## Debugging Features

### RenderDoc
HyperEngine has builtin [RenderDoc](https://renderdoc.org/) support. If RenderDoc can be found on your system then HyperEngine will automatically attach RenderDoc.

The default overlays are disable but will still be functional. F12 will still capture frames by default. You can attach it to HyperEngine at any time via RenderDoc with the `File>Attach to Running Instance`.

### Tracy
[Tracy](https://github.com/wolfpld/tracy/releases/tag/v0.11.0) is a frame profiler that is default supported. You can attach the tracy profiler at anytime.

## Shaders
All shader files should begin with `#inject`,
This will cause the HyperEngine shader engine to include the `#version` directive and proper `#define`s.

* `VERT` is defined if the source is being passed to the vertex shader compiler.
* `FRAG` is defined if the source is being passed to the fragment shader compiler.

You can use `#include` in your shaders. This will include files from the `./shaders` directory.
You likely want to `#include "common"` at the top of all your shaders.

HyperEngine can read back values from the shader using `@` pragmas.
Operates similarly to `#pragma` but with unique syntax for parsing.


`0 = false ; 1 = true`

Enable or disable backface culling, Enabled by default
`@property cull = 0|1`

Give the editor hints on how to render the uniform
`@edithint <uniform> = hidden|color`

`hidden` will completely remove the control from the property panel.
This is generally used for uniforms the engine runtime fills in.

`color` will present a color gui instead of float sliders.

You can `#define FAST` after the `#inject` to trigger your shader to run lower quality.
This currently affects shadow sampling and terrain texture mapping

Example:
```glsl
#inject
#define FAST
#include "common"
...
```

See shader sources in `./working` for examples.

## Dependencies
HyperEngine has a few dependencies listed below. If you cloned with submodules then you already have them all.

### In source tree
* [stb_image v2.30](https://github.com/nothings/stb/blob/f7f20f39fe4f206c6f19e26ebfef7b261ee59ee4/stb_image.h)
* [RenderDoc 1.6.0](https://renderdoc.org/docs/in_application_api.html)
* [debug-trap](https://github.com/nemequ/portable-snippets/blob/84abba93ff3d52c87e08ba81de1cc6615a42b72e/debug-trap/debug-trap.h)
* [ImGuiColorTextEdit 00c9fcb](https://github.com/santaclose/ImGuiColorTextEdit/tree/00c9fcb39e5dc82a4eefcf2e97f29e5e74381895) +Local fixes
* [miniaudio v0.11.21](https://github.com/mackron/miniaudio/tree/4a5b74bef029b3592c54b6048650ee5f972c1a48)
* [stb_vorbis v1.22](https://github.com/nothings/stb/blob/f75e8d1cad7d90d72ef7a4661f1b994ef78b4e31/stb_vorbis.c)
* [tinyfiledialogs v3.18.2](https://sourceforge.net/p/tinyfiledialogs/code/ci/29c1b354d75825209adf8cc1979c425885a64d32/tree/)
### Submodules
* [GLFW 3.4](https://github.com/glfw/glfw/tree/3.4)
* [Glad 3.3+](https://gen.glad.sh/#generator=c&api=gl%3D3.3&profile=gl%3Dcore%2Cgles1%3Dcommon&extensions=GL_ARB_direct_state_access%2CGL_ARB_texture_filter_anisotropic%2CGL_ARB_texture_storage%2CGL_EXT_texture_filter_anisotropic%2CGL_KHR_debug)
* [glm 1.0.1](https://github.com/g-truc/glm/tree/1.0.1)
* [ImGui v1.90.9-docking](https://github.com/ocornut/imgui/tree/v1.90.9-docking)
* [assimp v5.0.1](https://github.com/assimp/assimp/tree/v5.0.1)
* [EnTT v3.13.2](https://github.com/skypjack/entt/tree/v3.13.2)
* [Lua 5.4.6](https://github.com/anthofoxo/lua/tree/5.4.6)
* [ImGuizmo ba662b1](https://github.com/CedricGuillemet/ImGuizmo/tree/ba662b119d64f9ab700bb2cd7b2781f9044f5565)
* [Tracy v0.11.0](https://github.com/wolfpld/tracy/tree/v0.11.0)
* [spdlog v1.14.1](https://github.com/gabime/spdlog/tree/v1.14.1)